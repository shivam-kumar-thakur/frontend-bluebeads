<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile</title>
    <!-- External CSS files -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="icon" href="images/icon.png">

      <!-- ? POPPINS -->
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

    <!-- <link rel="stylesheet" href="css/style.css"> -->
    <link rel="stylesheet" href="css/container.css">
    <link rel="stylesheet" href="css/button-2.css">
    <link rel="stylesheet" href="css/button-1.css">
    <link rel="stylesheet" href="css/navbar_style.css">
    <link rel="stylesheet" href="css/user-profile.css">
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- Chat bot gemmini -->
 <!-- Include Bootstrap CSS -->
 <link rel="stylesheet" href="css/chatbot-style.css">
 <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
 <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
 <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,400,1,0" />
    <style>
    </style>
</head>
<body>
    <nav>
        <div class="nav-bar">
            <div class="logo">
                <img src="images/bluebeads_logo3.png" height="50px">
                <h1>Bluebeads</h1>
            </div>
            <div class="menu-nav">
                <div class="menu-container"> 
                    <div class="spacer-curve-1"></div>
                    <div class="back-container-curve">
                        <div class="content-curve">
                            <p><a href="user-profile.html"><i class="fas fa-user menu-icon-select-colour"></i> <span> Profile</span></a></p>
                        </div>
                    </div>
                    <div class="spacer-curve-2"></div>
                </div>
    
                <div class="menu-container"> 
                    <div class="content-nav">
                        <p><a href="find_donor.html"><i class="fas fa-droplet"></i> <span> Request</span></a></p>
                    </div>
                </div>
    
                <div class="menu-container"> 
                    <div class="content-nav">
                        <p><a href="find_ngo.html"><i class="fas fa-people-roof"></i> <span> NGO</span></a></p>
                    </div>
                </div>
    
                <div class="menu-container"> 
                    <div class="content-nav">
                        <p><a href="find_ngo.html"><i class="fas fa-campground"></i> <span> Camp</span></a></p>
                    </div>
                </div>

                <div class="menu-container"> 
                    <div class="content-nav">
                        <p><a href=""><i class="fas fa-home"></i> <span> About Us</span></a></p>
                    </div>
                </div>

                <div class="menu-container"> 
                    <div class="content-nav">
                        <p><a href="feedback.html"><i class="fas fa-comments"></i> <span> Feedback</span></a></p>
                    </div>
            </div>
        </div>
    </nav>

    <!-- Main container -->
    <div class="container-1">
        <!-- Left sidebar -->
        <div class="sidebar">
            <!-- User card -->
            <div class="card-1">
                <img src="images/shivam.jpg" alt="User Image">
                <div class="name" id="userName"></div>
            </div>
            <!-- Primary details -->
            <div class="primary-details" id="primary-details-overall">
            
            </div>
        </div>

        <!-- Right content -->
        <div class="content">
            <!-- Request donation section -->
            <p class="hello" id="hello"></p>
            <p>
                <i>Each One of Us is a Drop in an Ocean of Hope.</i>
            </p>
            <div class="donation donation-primary" id="first-action-group">
                
            </div>
            <hr>
            <p class="hello">Public Welfare</p>
            <div class="donation" id="donation-div">
                

            </div>
            <hr>
            <p class="hello">Blood Banks in User's State</p>
            <div class="donation" id="blood-banks-div">
                
            </div>
            <hr>
            <p class="hello">Camps in Your Area</p>
            <div class="donation-2" id="camps-div">
                
            </div>

        </div>
    </div>

    <button class="chatbot-toggler">
        <span class="material-symbols-rounded">mode_comment</span>
        <span class="material-symbols-outlined">close</span>
      </button>
      <div class="chatbot">
        <header>
          <h2>Ask Gemini</h2>
          <span class="close-btn material-symbols-outlined">close</span>
        </header>
        <ul class="chatbox">
          <li class="chat incoming">
            <span class="material-symbols-outlined">smart_toy</span>
            <p>Hi there ðŸ‘‹<br>How can I help you today ?</p>
          </li>
        </ul>
        <div class="chat-input">
          <textarea placeholder="Enter a message..." spellcheck="false" required></textarea>
          <span id="send-btn" class="material-symbols-rounded">send</span>
        </div>
      </div>

<script src="js/chatbot-script.js" defer></script>
<script>

    async function loadData(){
        const response=await fetch("https://api.bluebeads.shivamkrthakur.in/v1/user/user-profile",{
            method:"GET",
            headers: {
                            "Content-Type": "application/json"
                        },
        });

        const responseData=await response.json();
        console.log(responseData);
        // if(responseData.status===400 || responseData.status===401){
        //     console.log(responseData);
        //     // window.location.href="user-profile-details.html";
        // }
        // else if(responseData.ok){
        //     const userName=document.getElementById("userName").innerText;
        //     userName=`${responseData.data.details.userName}`;
        //     const primary_details_overall=document.getElementById("primary-details-overall").innerHTML;
        //     primary_details_overall=`<p id="primary-details-ingeneral-1"><span class="head-font-2">BLOOD GROUP:</span>${responseData.data.details.bloodGroup}</p>
        //                 <p id="primary-details-ingeneral-2"><span class="head-font-2">GENDER:</span>${responseData.data.details.gender}</p>
        //                 <p id="primary-details-ingeneral-3"><span class="head-font-2">Date of Birth:</span> ${responseData.data.details.dob}</p>
        //                 <p id="primary-details-ingeneral-4"><span class="head-font-2">EMAIL:</span>${responseData.data.details.email}</p>
        //                 <p id="primary-details-ingeneral-5"><span class="head-font-2">LOCATION:</span>${responseData.data.details.location}</p>
        //                 <p id="primary-details-ingeneral-6"><span class="head-font-2">LAST DONATION:</span>${responseData.data.lastdonation}</p>`;

        //     document.getElementById("hello").innerHTML=`Hello There, <span>${responseData.data.details.userName}</span>!`;
        //     const div_first_action_group=document.getElementById("first-action-group");

        //     if(responseData.data.requests.length!==null){

        //         for(const req in responseData.data.requests){
        //             if(responseData.data.requestStatus===1){
        //                 //request id se data leke aao.
        //                 responseData.data.requests.requestId
        //                 const div_first=document.createElement("div");
        //                 div_first.classList.add("card");
        //                 div_first.classList.add("request-donation");
        //                 div_first.classList.add("primiary-card-info");
        //                 div_first_action_group.append(div_first)
        //                 div_first.innerHTML=`<p class="head-font">Current Request</p>
        //                 <hr>
        //                 <p><span class="head-font-2">Blood Group Needed:</span>${responseData.data.bloodGroup}</p>
        //                 <p><span class="head-font-2">LOCATION:</span>${responseData.data.location.state}, ${responseData.data.location.country}</p>
        //                 <p><span class="head-font-2">Request Status:</span> Open</p>`;
        //             }
        //         }
        //     }

        //     const donation_div=document.getElementById("donation-div");
        //     if(responseData.data.donations.length!==null){
        //         const div=document.createElement("div");
        //         div.className.add(card);
        //         div.className.add(request-donation);
        //         // campId leke camp name with the clickable link
        //         // camp ka request type
        //         div.innerHTML=``;
        //         donation_div.append(div);
        //     }
        //     else{
        //         const div=document.createElement("div");
        //         div.className.add(card);
        //         div.className.add(request-donation);
        //         div.innerHTML=`<p class="head-font">Donations Done</p>
        //                 <hr>
        //                 <p >Make your first donation. 1 donation = 4 life.</p>
        //                 <img class="public-welfare-images" src="images/donate-it.jpg" alt="No Data Found" height="200px" >
        //                 <button class="button-1 btn-or" onclick="location.href = 'find_ngo.html';">Donate</button>`;
        //         donation_div.append(div);
        //     }
        //     if(responseData.data.volunteerExperience.length!==null){
        //         const div=document.createElement("div");
        //         div.className.add(card);
        //         div.className.add(request-donation);
        //         // campId leke camp name with the clickable link
        //         // camp ka request type
        //         div.innerHTML=``;
        //         donation_div.append(div);
        //     }
        //     else{
        //         const div=document.createElement("div");
        //         div.className.add(card);
        //         div.className.add(request-donation);
        //         div.innerHTML=` <p class="head-font">Volunteer Experience</p>
        //                 <hr>
        //                 <p >Be a volunteer for the donation camp. Find nearby camps.</p>
        //                 <center>
        //                     <img class="public-welfare-images" src="images/find-for-volunteer.jpg" alt="No Data Found" height="200px" width="360px">
        //                 </center>

        //                 <button class="button-1 btn-or" onclick="location.href = 'find_ngo.html';">Find</button>`;
        //         donation_div.append(div);
        //     }
        
        // }
        // else{
        //     window.location.href="login.html"
        // }
            
    }

    

    async function getBloodBank(){
        const responseBloodbank=await fetch("",{
            method:"GET"
        });

        const responseBloodbankData=await responseBloodbank.json();
        const blood_banks_div=document.getElementById("blood-banks-div");
        if(responseBloodbankData){
            const div=document.createElement("div");
            div.className.add(card);
            div.className.add(request-donation);
            div.innerHTML=` <!-- Blood Banks in User's State -->
                    <p><span class="head-font-2">NAME:</span>Athma Blood Centre (ABC) - Blood Bank</p>
                    <p><span class="head-font-2">LOCATION:</span> Chennai, Tamil Nadu, INDIA 600044</p>
                    <p><span class="head-font-2">CONTACT:</span> 095661 54918</p>`;
        }
    }

    async function getCampInfo(){
        const responseCamp=await fetch("",{
            method:"GET"
        });

        const responseCampData=await responseCamp.json();

        const camps_div=document.getElementById("camps-div");
        if(responseCampData){
            const div=document.createElement("div");
            div.className.add(card);
            div.className.add(request-donation);
            div.innerHTML=`<!-- camps in user area -->
                        <p><span class="head-font-2">Camp NAME:</span>Athma Blood Centre (ABC) - Blood Bank</p>
                        <p><span class="head-font-2">NGO:</span>Athma Blood Centre (ABC) - Blood Bank  </p>
                        <p><span class="head-font-2">Description:</span>We ensure adequate supply of safe and quality blood / blood products such as - Whole Blood - Packed Red Cells Concentrate (PRBC) - Fresh Frozen Plasma (FFP) - Cryoprecipitate ( Cryo) - Platelet Concentrate (RDP) - Single Donor Platelet (SDP) - Leuco depleted Platelet - Leuco depleted Red Cells - Irradiated processing charges - Red Cells in SAGM to all needy patients at all times, by motivating volunteers to donate blood, and organizing, conducting voluntary blood donation camps in nearby areas.</p>
                        <p><span class="head-font-2">LOCATION:</span> Chennai, Tamil Nadu, INDIA 600044</p>`;
        }
    }
    loadData();
    getBloodBank();
    getCampInfo();
    

    
// {
//     "success": false,
//     "message": "User details are incomplete."
// }
// {
//     "message": "User details retrieved successfully",
//     "data": {
//         "details": {
//             "_id": "65d258797c2a9af0f3e89996",
//             "userName": "John Doe",
//             "bloodGroup": "O+",
//             "gender": "male",
//             "dob": "1990-01-01T00:00:00.000Z",
//             "email": "john@example.com",
//             "location": {
//                 "type": "Point",
//                 "coordinates": [],
//                 "country": "United States",
//                 "state": "New York",
//                 "postalCode": "10000",
//                 "_id": "65d258797c2a9af0f3e89997"
//             },
//             "lastdonation": "2023-12-25T00:00:00.000Z",
//             "donations": [],
//             "volunteerExperience": [],
//             "requests": [],
//             "readyToDonate": [],
//             "createdAt": "2024-02-18T19:20:25.456Z",
//             "updatedAt": "2024-02-18T19:20:25.456Z",
//             "__v": 0
//         }
//     },
//     "statuscode": 200,
//     "success": true
// }

//     {
//     "userName": "John Doe",
//     "bloodGroup": "A+",
//     "gender": "male",
//     "dob": "1980-01-01",
//     "email": "john@example.com",
//     "location": {
//         "type": "Point",
//         "coordinates": [40.7128, -74.0060],
//         "country": "USA",
//         "state": "New York",
//         "postalCode": "10001"
//     },
//     "donations": [
//         {
//             "campId": "615a7f4f5a6f91a8e236b20f",
//             "requestStatus": 1
//         },
//         {
//             "campId": "615a7f4f5a6f91a8e236b210",
//             "requestStatus": 0
//         }
//     ],
//     "volunteerExperience": [
//         {
//             "campId": "615a7f4f5a6f91a8e236b211",
//             "requestStatus": 1
//         },
//         {
//             "campId": "615a7f4f5a6f91a8e236b212",
//             "requestStatus": 2
//         }
//     ],
//     "requests": [
//         {
//             "requestId": "615a7f4f5a6f91a8e236b213",
//             "requestStatus": 1
//         },
//         {
//             "requestId": "615a7f4f5a6f91a8e236b214",
//             "requestStatus": 0
//         }
//     ],
//     "readyToDonate": [
//         {
//             "user_id": "615a7f4f5a6f91a8e236b215",
//             "bloodGroup": "A+"
//         },
//         {
//             "user_id": "615a7f4f5a6f91a8e236b216",
//             "bloodGroup": "O-"
//         }
//     ],
//     "lastdonation": "2023-09-30T00:00:00.000Z"
// }

</script>
</body>
</html>

